<!DOCTYPE html>
<html>

<head>
  <title>Facebook Clone</title>
  <link rel="stylesheet" href="new.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
</head>

<body>
  <div class="container">
    <!-- <h1>Facebook Clone</h1> -->

    <div class="inner">
      <label for="message" id="posts">Post something:</label>
      <input id="message" placeholder="Add hashtags here"></input><br><br>
      <input type="file" id="image" accept="image/*" style="display:none">
      <label for="image" id="pl">Photo</label>
      <input type="file" id="video" accept="video/*" style="display:none">
      <label for="video" id="vl">Video</label>
      <button onclick="postMessage()" id="btn">Post</button>
      <!-- <i onclick="myFunction(this)" class="fa fa-thumbs-up"></i> -->
    </div>
  </div>
  <hr>
  <div id="messages"></div>
  <script>
    // Array to store messages
    let messages = [];
    // function saveMessages() {
    //         localStorage.setItem('messages', JSON.stringify(messages));
    //     }

    //     // Function to retrieve messages from local storage
    //     function loadMessages() {
    //         let storedMessages = localStorage.getItem('messages');
    //         if (storedMessages) {
    //             messages = JSON.parse(storedMessages);
    //             displayMessages();
    //         }
    //     }

    //     // Load messages from local storage on page load
    //     loadMessages();
    function myFunction(x) {
      x.classList.toggle("fa-thumbs-down");
    }


    function postMessage() {
      // Get the input elements
      let messageInput = document.getElementById('message');
      let imageInput = document.getElementById('image');
      let videoInput = document.getElementById('video');

      // Get the message text
      let messageText = messageInput.value.trim();

      // Get the image URL
      let imageURL = null;
      if (imageInput.files.length > 0) {
        imageURL = URL.createObjectURL(imageInput.files[0]);
      }

      // Get the video URL
      let videoURL = null;
      if (videoInput.files.length > 0) {
        videoURL = URL.createObjectURL(videoInput.files[0]);
      }

      // Return if message, image, and video are all empty
      if (!messageText && !imageURL && !videoURL) return;

      // Create a new message object with the text, image URL, video URL, and current time
      let message = {
        text: messageText,
        imageURL: imageURL,
        videoURL: videoURL,
          timestamp: new Date()
      };

      // Add the message to the beginning of the messages array
      messages.unshift(message);

      // Save the messages to local storage
      //  saveMessages();

      // Clear the input fields
      messageInput.value = '';
      imageInput.value = '';
      videoInput.value = '';


      // Update the message display
      displayMessages();

    }

    function displayMessages() {
      // Get the messages container element
      let messagesContainer = document.getElementById('messages');

      // Clear the container
      messagesContainer.innerHTML = '';

      // Loop through the messages array and add each message to the container
      for (let i = 0; i < messages.length; i++) {
        let message = messages[i];

       
        let btn = document.createElement("i");
        btn.classList.add("fa", "fa-thumbs-up", "fa-thumbs-down");
        btn.setAttribute("onclick", "myFunction(this)")
        btn.setAttribute("id","limb");
        let remove = document.createElement('i');
        remove.classList.add('fa', 'fa-trash-o');
        // remove.textContent = "Remove";
        remove.setAttribute("id","del")
        remove.addEventListener('click', function (event) {
          messages.splice(i, 1);
          displayMessages();
        })
        let sharebtn=document.createElement('i');
        sharebtn.setAttribute("id","share");
        sharebtn.classList.add("fa", "fa-share-alt")

        let combtn=document.createElement('i');
        combtn.setAttribute("id","com");
        combtn.classList.add("fa","fa-comments-o")

         // Create a new message element
         let messageElement = document.createElement('div');
        messageElement.classList.add('message');

        // Set the text content of the message element
        let textElement = document.createElement('div');
        textElement.setAttribute("id","come")
        let spann=document.createElement('span');
        spann.setAttribute("id","spann")
        spann.textContent=message.text;
        textElement.appendChild(spann)

        messageElement.appendChild(textElement);

        if (textElement) {
          spann.textContent = message.text;
          messageElement.appendChild(btn);
          
          messageElement.appendChild(sharebtn); 
          messageElement.appendChild(combtn); 
          messageElement.appendChild(remove);

        }



        // Add the image to the message element, if present
        if (message.imageURL) {
          let imageElement = document.createElement('img');
          imageElement.src = message.imageURL;
          imageElement.classList.add('message-image');
          messageElement.appendChild(imageElement);
          messageElement.appendChild(btn);
         
          messageElement.appendChild(sharebtn);  
          messageElement.appendChild(combtn);  
          messageElement.appendChild(remove);      
        }

        // Add the video to the message element, if present
        if (message.videoURL) {
          let videoElement = document.createElement('video');
          videoElement.src = message.videoURL;
          videoElement.width = 500;
          videoElement.height = 500;
          videoElement.setAttribute("controls", "controls");
          videoElement.classList.add('message-video');
          messageElement.appendChild(videoElement);
          messageElement.appendChild(btn);
          
          messageElement.appendChild(combtn); 
          // messageElement.appendChild(comm);
          messageElement.appendChild(remove);
        }

        // Set the timestamp of the message element
          let timestampElement = document.createElement('span');
          timestampElement.setAttribute("id","time");
          timestampElement.textContent = message.timestamp.toLocaleString();
          textElement.appendChild(timestampElement);

        // Add the message element to the container
        messagesContainer.appendChild(messageElement);
      }
    }
  </script>
</body>